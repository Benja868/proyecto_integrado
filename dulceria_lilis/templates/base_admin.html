<!-- templates/base_admin.html -->
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{% block title %}Panel - Dulcería Lilis{% endblock %}</title>

<!-- Bootstrap & FontAwesome -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    body { min-height: 100vh; font-family: 'Poppins', sans-serif; }
    .sidebar { 
        width: 230px; 
        background: #a71f1f; 
        color: #fff; 
        min-height: 100vh; 
        position: fixed; 
        box-shadow: 2px 0 8px rgba(0,0,0,0.2);
    }
    .sidebar a { 
        color: #fff; 
        text-decoration: none; 
        display: block; 
        padding: 12px 18px; 
        transition: background 0.2s; 
    }
    .sidebar a:hover, .sidebar .active { 
        background: rgba(255,255,255,0.15); 
        border-left: 4px solid #fff; 
        padding-left: 14px; 
    }
    .content { 
        margin-left: 230px; 
        padding: 30px; 
        background-color: #f8f9fa; 
        min-height: 100vh;
    }
    .sidebar-header {
        text-align: center;
        padding: 25px 15px;
        border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    .sidebar-header img {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 2px solid #fff;
        margin-bottom: 10px;
        background: #fff;
        object-fit: cover;
    }
    .sidebar-header h4 {
        font-size: 1.2rem;
        font-weight: bold;
    }
    .sidebar-header small {
        color: #ffeaea;
        font-size: 0.8rem;
    }
    .logout-section {
        border-top: 1px solid rgba(255,255,255,0.2);
        padding: 15px;
        text-align: center;
    }
</style>
</head>

<body>
<div class="sidebar d-flex flex-column">
    <!-- Encabezado con logo -->
    <div class="sidebar-header">
        <img src="https://cdn-icons-png.flaticon.com/512/2965/2965567.png" alt="Logo Dulcería">
        <h4><i class="fas fa-candy-cane me-2"></i>Dulcería Lilis</h4>
        <small>Gestión de Producción</small>
    </div>

    <!-- Menú lateral -->
    <nav class="flex-fill mt-3">
        <a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt me-2"></i> Dashboard</a>
        <a href="{% url 'inventario' %}"><i class="fas fa-boxes me-2"></i> Inventario</a>
        <a href="{% url 'compras' %}"><i class="fas fa-cart-plus me-2"></i> Compras</a>
        <a href="{% url 'produccion' %}"><i class="fas fa-industry me-2"></i> Producción</a>
        <a href="{% url 'ventas' %}"><i class="fas fa-cash-register me-2"></i> Ventas</a>
        <a href="{% url 'finanzas' %}"><i class="fas fa-wallet me-2"></i> Finanzas</a>
        <a href="{% url 'clientes' %}"><i class="fas fa-users me-2"></i> Clientes</a>
        <a href="{% url 'proveedores' %}"><i class="fas fa-truck-field me-2"></i> Proveedores</a>
        <a href="{% url 'productos' %}"><i class="fas fa-cubes me-2"></i> Productos</a>
    </nav>

    <!-- Sección de usuario -->
    <div class="logout-section">
        {% if user.is_authenticated %}
            <div class="small">Conectado como</div>
            <strong>{{ user.username }}</strong>
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button class="btn btn-outline-light btn-sm mt-2" type="submit">Cerrar sesión</button>
            </form>
        {% else %}
            <a class="btn btn-light btn-sm w-100" href="{% url 'login' %}">Iniciar sesión</a>
        {% endif %}
    </div>
</div>

<!-- Contenido principal -->
<div class="content">
    {% if messages %}
        {% for m in messages %}
            <div class="alert alert-{{ m.tags }} alert-dismissible fade show" role="alert">
                {{ m }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
            </div>
        {% endfor %}
    {% endif %}

    {% block content %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
